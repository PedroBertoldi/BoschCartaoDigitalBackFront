<app-menu></app-menu>
<div class="center">
    <div class="menuContainer">
        <h1>Indicar um Terceiro</h1>
    </div>
    <div *ngIf="indicado" class="currentIndication">
        <span>
            <span *ngIf="indicado.edv">Colaborador</span>
            <span *ngIf="!indicado.edv && indicado.cpf">Terceiro</span>
            <b> {{indicado.nomeCompleto}}</b>
            <span *ngIf="indicado.edv"> de <b>EDV: {{indicado.edv}}</b></span>
            <span *ngIf="!indicado.edv && indicado.cpf"> de <b>CPF: {{indicado.cpf | mask:'000.000.000-00'}}</b></span>
            est&aacute; indicado
            atualmente.
        </span>
        <app-button-with-loading [loading]="removeLoading" label="Remover Indicação" (click)="removeIndicacao()">
        </app-button-with-loading>
    </div>


    <form [formGroup]="indicarForm" class="indicarForm" action="meus-beneficios">
        <mat-form-field>
            <mat-select [(value)]="idType" (selectionChange)="changeType()">
                <mat-option value="edv">
                    Colaborador Bosch
                </mat-option>
                <mat-option value="cpf">
                    Retirada Via CPF
                </mat-option>
            </mat-select>
        </mat-form-field>
        <div>
            <mat-form-field>
                <mat-label>Nome</mat-label>
                <input matInput formControlName="name" type="text">
                <mat-error *ngIf="submitted && indicarForm.controls.name.untouched && idType =='cpf'">
                    Preencha o nome do indicado!
                </mat-error>
            </mat-form-field>
        </div>

        <div *ngIf="idType =='cpf'">
            <mat-form-field>
                <mat-label>CPF</mat-label>
                <input mask="000.000.000-00" matInput formControlName="cpf" type="text">
                <mat-error *ngIf="submitted && indicarForm.controls.cpf.errors">
                    1 Preencha o CPF do indicado!
                </mat-error>
            </mat-form-field>
        </div>
        <div *ngIf="idType =='edv'">
            <mat-form-field>
                <mat-label>EDV</mat-label>
                <input (input)="searchEdv()" mask="0009999999" matInput formControlName="edv" type="text">
                <mat-error *ngIf="submitted && indicarForm.controls.edv.errors">
                    Preencha o EDV do indicado!
                </mat-error>
            </mat-form-field>
            <mat-error *ngIf="notfound">
                EDV não encontrado!
            </mat-error>
        </div>

        <app-button-with-loading [loading]="loading" label="Enviar" (click)="submitIndicacao()">
        </app-button-with-loading>
    </form>

</div>